cmake_minimum_required(VERSION 3.16)
project(engine_module C)

set(CMAKE_C_STANDARD 17)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

# Python
find_package(Python3 COMPONENTS Interpreter Development REQUIRED)

# SDL2
find_package(SDL2 REQUIRED)
find_package(SDL2_image REQUIRED)

add_library(engine MODULE
    src/engine.c
    src/graphics.c
)

set_target_properties(engine PROPERTIES
    PREFIX ""
    SUFFIX ".so"
)

target_include_directories(engine PRIVATE ${Python3_INCLUDE_DIRS} ${SDL2_INCLUDE_DIRS} include)
target_link_libraries(engine PRIVATE ${Python3_LIBRARIES} ${SDL2_LIBRARIES})
